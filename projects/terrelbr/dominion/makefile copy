CFLAGS = -Wall -std=c99 -fpic -coverage -lm


all: unittest1 unittest2 unittest3 unittest4 unittest5

unittest: unittest1.c unittest2.c unittest3.c unittest4.c unittest5.c 
	echo "unittest1.c:" >> unittestresult.out
	gcc -o unittest1 dominion.c rngs.c unittest1.c $(CFLAGS)
	unittest1 >> unittestresult.out
	gcov dominion.c -b -f >> unittestresult.out 
	
	echo "unittest2.c:" >> unittestresult.out
	gcc -o unittest2 dominion.c rngs.c unittest2.c $(CFLAGS)
	unittest2 >> unittestresult.out
	gcov dominion.c -b -f >> unittestresult.out 
	
	echo "unittest3.c:" >> unittestresult.out
	gcc -o unittest3 dominion.c rngs.c unittest3.c $(CFLAGS)
	unittest3 >> unittestresult.out
	gcov dominion.c -b -f >> unittestresult.out 
	
	echo "unittest4.c:" >> unittestresult.out
	gcc -o unittest4 dominion.c rngs.c unittest4.c $(CFLAGS)
	unittest4 >> unittestresult.out
	gcov dominion.c -b -f >> unittestresult.out 
	
	echo "unittest5.c:" >> unittestresult.out
	gcc -o unittest5 dominion.c rngs.c unittest5.c $(CFLAGS)
	unittest4 >> unittestresult.out
	gcov dominion.c -b -f >> unittestresult.out 

	#cat dominion.c.gcov >> unittestresult.out


#unittest1:
#	gcc -Wall -std=c99 -fprofile-arcs -ftest-coverage dominion.c unittest1.c rngs.c -o unittest1 -lm -g

#unittest2:
#	gcc -Wall -std=c99 -fprofile-arcs -ftest-coverage dominion.c unittest2.c rngs.c -o unittest2 -lm -g

#unittest3:
#	gcc -Wall -std=c99 -fprofile-arcs -ftest-coverage dominion.c unittest3.c rngs.c -o unittest3 -lm -g

#unittest4:
#	gcc -Wall -std=c99 -fprofile-arcs -ftest-coverage dominion.c unittest4.c rngs.c -o unittest4 -lm -g

#unittest5:
#	gcc -Wall -std=c99 -fprofile-arcs -ftest-coverage dominion.c unittest5.c rngs.c -o unittest5 -lm -g

#unittest:
#	./unittest1 >> unittestresult.out
#	./unittest2 >> unittestresult.out
#	./unittest3 >> unittestresult.out
#	./unittest4 >> unittestresult.out
#	./unittest5 >> unittestresult.out
#	gcov dominion.c -b -f >> unittestresult.out
#	cat dominion.c.gcov >> unittestresult.out

clean:
	rm -f unittest1 unittest2 unittest3 unittest4 unittest5 *.o *.gcda *.gcno *.gcov *.so
